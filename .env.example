# ========================================
# Aura Audit AI (Project Atlas) - Environment Variables
# ========================================

# ----------------------------------------
# Database
# ----------------------------------------
DATABASE_URL=postgresql://atlas:atlas_secret@db:5432/atlas
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# ----------------------------------------
# Redis
# ----------------------------------------
REDIS_URL=redis://redis:6379/0

# ----------------------------------------
# Object Storage (S3 / MinIO / Azure Blob)
# ----------------------------------------
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minio
S3_SECRET_KEY=minio123
S3_BUCKET=atlas-binders
S3_WORM_BUCKET=atlas-worm
S3_REGION=us-east-1
S3_USE_SSL=false

# Production AWS S3 (comment out MinIO above)
# S3_ENDPOINT=
# S3_ACCESS_KEY=
# S3_SECRET_KEY=
# S3_BUCKET=atlas-prod-binders
# S3_WORM_BUCKET=atlas-prod-worm
# S3_REGION=us-east-1
# S3_USE_SSL=true

# ----------------------------------------
# Authentication (OIDC / OAuth2)
# ----------------------------------------
OIDC_ENABLED=false
OIDC_ISSUER=https://login.microsoftonline.com/002fa7de-1afd-4945-86e1-79281af841ad/v2.0
OIDC_CLIENT_ID=bd4c65f8-e6b1-4980-b47b-47b0ba9f8904
OIDC_CLIENT_SECRET=<from-keyvault-oauth-client-secret>
OIDC_AUDIENCE=api://bd4c65f8-e6b1-4980-b47b-47b0ba9f8904

# Microsoft 365 OAuth (alternative variable names for some services)
AZURE_AD_TENANT_ID=002fa7de-1afd-4945-86e1-79281af841ad
AZURE_AD_CLIENT_ID=bd4c65f8-e6b1-4980-b47b-47b0ba9f8904
AZURE_AD_CLIENT_SECRET=<from-keyvault-oauth-client-secret>

# Development JWT (when OIDC disabled)
JWT_SECRET=dev-secret-change-in-production-to-256-bit-random-key
JWT_ALGORITHM=HS256
JWT_EXPIRY_HOURS=8

# ----------------------------------------
# LLM / AI Services
# ----------------------------------------
# OpenAI
OPENAI_API_KEY=sk-proj-...
OPENAI_CHAT_MODEL=gpt-4-turbo-2024-04-09
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.1

# Azure OpenAI (alternative)
# AZURE_OPENAI_ENDPOINT=https://<resource>.openai.azure.com/
# AZURE_OPENAI_API_KEY=...
# AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
# AZURE_OPENAI_API_VERSION=2024-02-15-preview

# MLflow (Model Registry)
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_EXPERIMENT_NAME=atlas-disclosures

# ----------------------------------------
# Airflow
# ----------------------------------------
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__SQL_ALCHEMY_CONN=postgresql://atlas:atlas_secret@db:5432/airflow
AIRFLOW__CORE__FERNET_KEY=<generate-with-python-cryptography-fernet-generate-key>
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__API__AUTH_BACKEND=airflow.api.auth.backend.basic_auth
AIRFLOW__WEBSERVER__SECRET_KEY=<generate-random-secret>
AIRFLOW_UID=50000

# ----------------------------------------
# ERP / Accounting Connectors
# ----------------------------------------
# QuickBooks Online
QBO_CLIENT_ID=<intuit-client-id>
QBO_CLIENT_SECRET=<intuit-client-secret>
QBO_REDIRECT_URI=http://localhost:8010/connectors/qbo/callback
QBO_ENVIRONMENT=sandbox  # or production

# NetSuite
NETSUITE_ACCOUNT_ID=<account-id>
NETSUITE_CONSUMER_KEY=<consumer-key>
NETSUITE_CONSUMER_SECRET=<consumer-secret>
NETSUITE_TOKEN_ID=<token-id>
NETSUITE_TOKEN_SECRET=<token-secret>

# Xero
XERO_CLIENT_ID=<xero-client-id>
XERO_CLIENT_SECRET=<xero-client-secret>
XERO_REDIRECT_URI=http://localhost:8010/connectors/xero/callback

# Sage Intacct
SAGE_COMPANY_ID=<company-id>
SAGE_USER_ID=<user-id>
SAGE_USER_PASSWORD=<user-password>
SAGE_SENDER_ID=<sender-id>
SAGE_SENDER_PASSWORD=<sender-password>

# ----------------------------------------
# Payroll Connectors
# ----------------------------------------
# ADP
ADP_CLIENT_ID=<adp-client-id>
ADP_CLIENT_SECRET=<adp-client-secret>
ADP_REDIRECT_URI=http://localhost:8010/connectors/adp/callback

# ----------------------------------------
# E-Signature
# ----------------------------------------
# DocuSign (optional)
DOCUSIGN_INTEGRATION_KEY=<integration-key>
DOCUSIGN_SECRET_KEY=<secret-key>
DOCUSIGN_ACCOUNT_ID=<account-id>
DOCUSIGN_USER_ID=<user-id>
DOCUSIGN_AUTH_SERVER=https://account-d.docusign.com

# Internal PKI
PKI_CA_CERT_PATH=/app/certs/ca-cert.pem
PKI_CA_KEY_PATH=/app/certs/ca-key.pem
PKI_CA_KEY_PASSWORD=<ca-key-password>

# ----------------------------------------
# EDGAR API
# ----------------------------------------
EDGAR_BASE_URL=https://data.sec.gov
EDGAR_USER_AGENT=Aura Audit AI contact@aura-audit.ai

# ----------------------------------------
# Security
# ----------------------------------------
# Encryption keys (KMS in production)
ENCRYPTION_KEY=<32-byte-hex-key-for-field-level-encryption>

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ----------------------------------------
# Observability
# ----------------------------------------
# OpenTelemetry
OTEL_ENABLED=true
OTEL_SERVICE_NAME=atlas
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# Sentry (optional)
SENTRY_DSN=https://<key>@<org>.ingest.sentry.io/<project>
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ----------------------------------------
# Feature Flags
# ----------------------------------------
FEATURE_IFRS_SUPPORT=false
FEATURE_PEER_BENCHMARKING=false
FEATURE_AUTO_CONFIRMATIONS=false
FEATURE_GENERATIVE_DIFF=false

# ----------------------------------------
# Compliance
# ----------------------------------------
# Data retention (days)
WORM_RETENTION_DAYS=2555  # 7 years
AUDIT_LOG_RETENTION_DAYS=2555
PBC_RETENTION_DAYS=365  # Client-controlled, shorter

# Data residency
DATA_REGION=us-east-1
DATA_RESIDENCY_ENFORCEMENT=true

# ----------------------------------------
# Rate Limiting
# ----------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ----------------------------------------
# Development
# ----------------------------------------
DEBUG=false
LOG_LEVEL=INFO
RELOAD=false  # Set to true for auto-reload in dev

# ----------------------------------------
# Testing
# ----------------------------------------
PYTEST_WORKERS=4
PLAYWRIGHT_HEADED=false
