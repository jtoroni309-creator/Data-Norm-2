# ========================================
# Aura Audit AI - Production Environment Configuration
# ========================================
#
# IMPORTANT: This is a template file. Copy to .env.production and fill in actual values.
# DO NOT commit .env.production to version control!
#

# ========================================
# General Settings
# ========================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# ========================================
# Database Configuration (PostgreSQL)
# ========================================
# Azure PostgreSQL connection string
# Format: postgresql://username:password@hostname:5432/database?sslmode=require
# Get these values from Terraform outputs after deployment
DATABASE_URL=postgresql://atlasadmin:REPLACE_WITH_PASSWORD@REPLACE_WITH_FQDN:5432/atlas?sslmode=require
POSTGRES_HOST=REPLACE_WITH_FQDN
POSTGRES_PORT=5432
POSTGRES_USER=atlasadmin
POSTGRES_PASSWORD=REPLACE_WITH_PASSWORD
POSTGRES_DB=atlas

# ========================================
# Redis Configuration
# ========================================
# Azure Cache for Redis connection string
# Format: rediss://password@hostname:6380/0?ssl_cert_reqs=required
# Get these values from Terraform outputs after deployment
REDIS_URL=rediss://:REPLACE_WITH_REDIS_KEY@REPLACE_WITH_REDIS_HOSTNAME:6380/0?ssl_cert_reqs=required
REDIS_HOST=REPLACE_WITH_REDIS_HOSTNAME
REDIS_PORT=6380
REDIS_PASSWORD=REPLACE_WITH_REDIS_KEY

# ========================================
# Azure Blob Storage (S3-compatible)
# ========================================
# For workpapers, engagements, and WORM storage
S3_ENDPOINT=https://REPLACE_WITH_STORAGE_ACCOUNT.blob.core.windows.net
S3_ACCESS_KEY=REPLACE_WITH_STORAGE_ACCOUNT_NAME
S3_SECRET_KEY=REPLACE_WITH_STORAGE_ACCOUNT_KEY
S3_BUCKET=workpapers
S3_WORM_BUCKET=atlas-worm
S3_USE_SSL=true

# ========================================
# Authentication & Security
# ========================================
# JWT Configuration
# Generate with: openssl rand -hex 32
JWT_SECRET=REPLACE_WITH_RANDOM_SECRET_64_CHARS
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60
REFRESH_TOKEN_EXPIRATION_DAYS=30

# Encryption Key for PII/sensitive data
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=REPLACE_WITH_RANDOM_ENCRYPTION_KEY_64_CHARS

# Master Key for key rotation
# Generate with: openssl rand -hex 32
MASTER_KEY=REPLACE_WITH_RANDOM_MASTER_KEY_64_CHARS

# ========================================
# OpenAI API Configuration
# ========================================
# REQUIRED: Get from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-REPLACE_WITH_YOUR_OPENAI_API_KEY
OPENAI_CHAT_MODEL=gpt-4-turbo-2024-04-09
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.1

# ========================================
# Accounting Integrations
# ========================================

# QuickBooks Online
# Get from: https://developer.intuit.com
QBO_CLIENT_ID=REPLACE_WITH_QBO_CLIENT_ID
QBO_CLIENT_SECRET=REPLACE_WITH_QBO_CLIENT_SECRET
QBO_REDIRECT_URI=https://api.aura-audit-ai.com/api/integrations/quickbooks/callback
QBO_ENVIRONMENT=production

# Xero
# Get from: https://developer.xero.com
XERO_CLIENT_ID=REPLACE_WITH_XERO_CLIENT_ID
XERO_CLIENT_SECRET=REPLACE_WITH_XERO_CLIENT_SECRET
XERO_REDIRECT_URI=https://api.aura-audit-ai.com/api/integrations/xero/callback
XERO_SCOPES=accounting.transactions,accounting.contacts,accounting.settings

# NetSuite
# Get from your NetSuite account
NETSUITE_ACCOUNT_ID=REPLACE_WITH_NETSUITE_ACCOUNT_ID
NETSUITE_CONSUMER_KEY=REPLACE_WITH_NETSUITE_CONSUMER_KEY
NETSUITE_CONSUMER_SECRET=REPLACE_WITH_NETSUITE_CONSUMER_SECRET
NETSUITE_TOKEN_ID=REPLACE_WITH_NETSUITE_TOKEN_ID
NETSUITE_TOKEN_SECRET=REPLACE_WITH_NETSUITE_TOKEN_SECRET

# ========================================
# Third-Party Services
# ========================================

# DocuSign (for e-signatures)
# Get from: https://developers.docusign.com
DOCUSIGN_INTEGRATION_KEY=REPLACE_WITH_DOCUSIGN_INTEGRATION_KEY
DOCUSIGN_SECRET_KEY=REPLACE_WITH_DOCUSIGN_SECRET_KEY
DOCUSIGN_ACCOUNT_ID=REPLACE_WITH_DOCUSIGN_ACCOUNT_ID
DOCUSIGN_BASE_URL=https://www.docusign.net/restapi

# Stripe (for payments/subscriptions)
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_API_KEY=sk_live_REPLACE_WITH_STRIPE_SECRET_KEY
STRIPE_PUBLISHABLE_KEY=pk_live_REPLACE_WITH_STRIPE_PUBLISHABLE_KEY
STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_STRIPE_WEBHOOK_SECRET

# Plaid (for bank verification - fraud detection)
# Get from: https://dashboard.plaid.com
PLAID_CLIENT_ID=REPLACE_WITH_PLAID_CLIENT_ID
PLAID_SECRET=REPLACE_WITH_PLAID_SECRET
PLAID_ENVIRONMENT=production

# SendGrid (for email notifications)
# Get from: https://app.sendgrid.com
SENDGRID_API_KEY=SG.REPLACE_WITH_SENDGRID_API_KEY
SENDGRID_FROM_EMAIL=noreply@aura-audit-ai.com
SENDGRID_FROM_NAME=Aura Audit AI

# ========================================
# Application Settings
# ========================================

# CORS Configuration
CORS_ORIGINS=https://aura-audit-ai.com,https://api.aura-audit-ai.com,https://admin.aura-audit-ai.com

# Service URLs (internal Kubernetes DNS)
IDENTITY_SERVICE_URL=http://identity:8000
INGESTION_SERVICE_URL=http://ingestion:8000
NORMALIZE_SERVICE_URL=http://normalize:8000
ANALYTICS_SERVICE_URL=http://analytics:8000
LLM_SERVICE_URL=http://llm:8000
ENGAGEMENT_SERVICE_URL=http://engagement:8000
DISCLOSURES_SERVICE_URL=http://disclosures:8000
REPORTING_SERVICE_URL=http://reporting:8000
QC_SERVICE_URL=http://qc:8000
CONNECTORS_SERVICE_URL=http://connectors:8000
ACCOUNTING_INTEGRATIONS_SERVICE_URL=http://accounting-integrations:8000

# ========================================
# Monitoring & Observability
# ========================================

# Azure Application Insights
# Get from Terraform outputs
APPINSIGHTS_INSTRUMENTATION_KEY=REPLACE_WITH_APPINSIGHTS_KEY
APPINSIGHTS_CONNECTION_STRING=REPLACE_WITH_APPINSIGHTS_CONNECTION_STRING

# Sentry (optional - for error tracking)
SENTRY_DSN=REPLACE_WITH_SENTRY_DSN
SENTRY_ENVIRONMENT=production

# ========================================
# Feature Flags
# ========================================
FEATURE_EDGAR_SCRAPING=true
FEATURE_AI_DISCLOSURES=true
FEATURE_FRAUD_DETECTION=true
FEATURE_REG_AB_AUDIT=true
FEATURE_MULTI_TENANT=true
FEATURE_E_SIGNATURE=true

# ========================================
# Compliance & Retention
# ========================================
WORM_RETENTION_YEARS=7
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years
KEY_ROTATION_DAYS=90
SESSION_TIMEOUT_MINUTES=30

# ========================================
# Performance & Scaling
# ========================================
MAX_WORKERS=4
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
REDIS_POOL_SIZE=50
CACHE_TTL_SECONDS=3600

# ========================================
# EDGAR Configuration
# ========================================
EDGAR_BASE_URL=https://data.sec.gov
EDGAR_USER_AGENT=Aura Audit AI contact@aura-audit-ai.com
EDGAR_RATE_LIMIT_REQUESTS=10
EDGAR_RATE_LIMIT_PERIOD=1

# ========================================
# Azure Key Vault (if using)
# ========================================
# Uncomment if using Azure Key Vault for secrets
# AZURE_KEY_VAULT_NAME=REPLACE_WITH_KEY_VAULT_NAME
# AZURE_KEY_VAULT_URI=https://REPLACE_WITH_KEY_VAULT_NAME.vault.azure.net/
# USE_AZURE_KEY_VAULT=true
